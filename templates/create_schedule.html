<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create Schedule</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        body { margin: 0; font-family: Arial, sans-serif; background: #f4f6f9; }
        .navbar { background: #e67e22; padding: 15px; display: flex; justify-content: space-between; align-items: center; color: white; }
        .navbar h2 { margin: 0; }
        .navbar ul { list-style: none; display: flex; margin: 0; padding: 0; gap: 20px; }
        .navbar ul li a { color: white; text-decoration: none; font-weight: bold; }
        .navbar ul li a:hover { text-decoration: underline; }
        .container { margin: 40px auto; width: 95%; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h3 { text-align: center; color: #333; }
        form { text-align: center; margin-bottom: 20px; }
        select, button { padding: 10px 15px; margin: 10px; border-radius: 6px; border: 1px solid #ccc; }
        button { background: #e67e22; color: white; cursor: pointer; font-weight: bold; }
        button:hover { background: #ca6516; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
        th { background: #e67e22; color: white; }
    </style>
</head>
<body>
    <div class="navbar">
        <h2><i class="fas fa-user-shield"></i> Admin Dashboard</h2>
        <ul>
            <li><a href="/admin/add_branch"><i class="fas fa-building-columns"></i> Add Branch</a></li>
            <li><a href="/admin/add_student"><i class="fas fa-user-graduate"></i> Add Student</a></li>
            <li><a href="/admin/add_faculty"><i class="fas fa-chalkboard-teacher"></i> Add Faculty</a></li>
            <li><a href="/admin/create_schedule"><i class="fas fa-calendar-alt"></i> Create Schedule</a></li>
            <li><a href="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </ul>
    </div>

    <div class="container">
        <h3><i class="fas fa-calendar-alt"></i> Create Weekly Schedule</h3>

        <!-- Branch selection form -->
        <form method="POST">
            <label for="branch">Select Branch:</label>
            <select name="branch" id="branch" required>
                {% for branch in branches %}
                <option value="{{ branch['bname'] }}"
                  {% if selected_branch and selected_branch == branch['bname'] %}selected{% endif %}>
                  {{ branch['bname'] }}
                </option>
                {% endfor %}
            </select>
            <button type="submit">Generate Schedule</button>
        </form>

        {% if schedule %}
        <h4 style="text-align:center;">Schedule for {{ selected_branch }}</h4>
        <table>
            <thead>
                <tr>
                    <th>Day</th>
                    {% for p in range(1,9) %}
                    <th>Period {{p}}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for day, periods in schedule.items() %}
                <tr>
                    <td>{{ day }}</td>
                    {% for p in periods %}
                    <td>{{ p }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </div>
</body>
</html>
